!function(a){"use strict";var b,c=a.requestAnimationFrame,d=a.cancelAnimationFrame,e=0,f=0,g=null,h=!1,i=function(){if(f!==e)for(g=c(i),b=j.length;b--;)j[b]._numLoaded!==j[b]._num2Load&&j[b].handle();else d(g),g=null,h=!1},j=[],k=function(){return this.init.apply(this,arguments)};k.prototype={init:function(a){this._elements=a,this._numLoaded=0,this._num2Load=a.length,this._handlers={update:null,handle:null},this._before=null,this._after=null,e+=this._num2Load,j.push(this),h||(i(),h=!0)},on:function(a,b){return this._handlers[a]=b,this},update:function(){for(var a=0,b=this._elements.length;b>a;a++)this._fire("update",this._elements[a]);return this},handle:function(){for(var a=0,b=this._elements.length;b>a;a++)!this._fire("handle",this._elements[a])||this._elements[a].dataset.handled||this._elements[a].dataset.loaded||(f++,this._numLoaded++);return this},before:function(a){return"function"==typeof a&&(this._before=a),this},after:function(a){return"function"==typeof a&&(this._after=a),this},loadImage:function(a,b){var c=this,d=new Image;a.dataset.loading=!0,"function"==typeof this._before&&this._before(a),d.onload=function(){d=null,a.dataset.loaded=!0,a.dataset.handled=!0,a.dataset.loading=!1,"function"==typeof c._after&&c._after(a)},d.src=b},_fire:function(a,b){var c=!1;return"function"==typeof this._handlers[a]&&(c=this._handlers[a].call(this,b)),c}},a.LazyLoader=k}(window);