!function(a,b){"use strict";var c=function(){return this.init.apply(this,arguments)};c.prototype={constructor:c,_rHash:/#/,_rHTTPs:/^http[s]?:\/\/.*?\//,_pushable:"history"in a&&"pushState"in a.history,_hashable:"onhashchange"in a,init:function(c){var d=a.location.href;this._enabled=!1,this._ishashpushed=!1,this._uid=0,this._states={},this._responses={},this._callbacks={},this._async=c&&c.async!==b?c.async:!0,this._caching=c&&c.caching!==b?c.caching:!0,this._states[d]={uid:this.getUID(),cached:!1},this._stateEnable()},on:function(a,b){"function"==typeof b&&(this._callbacks[a]||(this._callbacks[a]=[]),b._pushstateID=this.getUID(),b._pushstateType=a,this._callbacks[a].push(b))},push:function(a,b){var c=this;this._fire("beforestate"),this._stateCached(a)?(this._push(a),b(this._responses[a])):(this._states[a]={uid:this.getUID(),cached:!1},this._async?this._getUrl(a,function(d){c._push(a),c._fire("afterstate",d),"function"==typeof b&&b(d)}):(this._push(a),this._fire("afterstate"),"function"==typeof b&&b()))},goBack:function(){a.history.back(),this._fire("back")},goForward:function(){a.history.forward(),this._fire("forward")},getUID:function(){return this._uid=this._uid+1,this._uid},_push:function(b){this._pushable?a.history.pushState(this._states[b],"",b):(this._ishashpushed=!0,a.location.hash=b.replace(this._rHTTPs,""))},_stateCached:function(a){var b=!1;return this._caching&&this._states[a]&&this._states[a].cached&&this._responses[a]&&(b=!0),b},_cacheState:function(a,b){this._caching&&(this._states[a].cached=!0,this._responses[a]=b)},_getUrl:function(a,b){var c=new XMLHttpRequest,d=this;c.open("GET",a,!0),c.onreadystatechange=function(){if(4===this.readyState)if(200===this.status)try{d._cacheState(a,this),"function"==typeof b&&b(this)}catch(c){}else 404===this.status},c.send()},_fire:function(a){if(this._callbacks[a])for(var b=this._callbacks[a].length;b--;)this._callbacks[a][b].apply(this,[].slice.call(arguments,1))},_stateEnable:function(){if(this._enabled)return this;var b=this,c=function(){var c=a.location.href.replace(b._rHash,"/");b._stateCached(c)?b._fire("popstate",c,b._responses[c]):b._getUrl(c,function(a){b._fire("popstate",c,a)})};this._enabled=!0,this._pushable?a.addEventListener("popstate",function(){c()},!1):this._hashable&&a.addEventListener("hashchange",function(){b._ishashpushed?b._ishashpushed=!1:c()},!1)}},a.PushState=c}(window),function(a){"use strict";var b=function(){return this.init.apply(this,arguments)};b.prototype={constructor:b,_rHTTPs:/^http[s]?:\/\/.*?\//,_rTrails:/^\/|\/$/g,_rHashQuery:/#.*$|\?.*$/g,_rWild:/^:/,_wilders:{num:/^[0-9]+$/,slug:/^[A-Za-z]+[A-Za-z0-9-_.]*$/},init:function(a){this._routes=a?this._cleanRoutes(a):[]},config:function(a){return this._routes=this._routes.concat(this._cleanRoutes(a)),this},test:function(a){return this.parse(a,this._routes).match},match:function(a){return this.parse(a,this._routes).matches},compare:function(a,b){return this.parse(b,[a])},parse:function(a,b){for(var c,d,e,f,g,h,i=this._cleanRoute(a),j=i.split("/"),k=j.length,l=b.length,m={match:!1,route:null,matches:{}},n=0;l>n;n++){if(m={match:!1,route:null,matches:{}},f=b[n].split("/"),"/"===i&&"/"===b[n]){m.match=!0,m.route=b[n];break}if(f.length===j.length){c=0;for(var o=0;k>o;o++)this._rWild.test(f[o])?(d=f[o].split("!"),e=d[0],h=d[1],m.matches[e.replace(this._rWild,"")]=j[o],h?(this._wilders[h]&&(g=this._wilders[h]),g&&g.test(j[o])&&c++):c++):j[o]===f[o]&&c++;if(c===j.length){m.match=!0,m.route=b[n];break}}}return m},_cleanRoute:function(a){return"/"!==a&&(a=a.replace(this._rHTTPs,""),a=a.replace(this._rTrails,""),a=a.replace(this._rHashQuery,"")),""===a&&(a="/"),a},_cleanRoutes:function(a){for(var b=a.length;b--;)a[b]=this._cleanRoute(a[b]);return a}},a.MatchRoute=b}(window),function(a,b){"use strict";var c=function(){return this.init.apply(this,arguments)};c.prototype={constructor:c,init:function(a){var c=this;this._matcher=new MatchRoute,this._pusher=new PushState(a),this._callbacks={get:[]},this._options={preventDefault:a.preventDefault!==b?a.preventDefault:!1},this._uid=0,document.addEventListener?document.addEventListener("click",function(a){c._handler(a)},!1):document.attachEvent&&document.attachEvent("onclick",function(a){c._handler(a)}),this._pusher.on("popstate",function(a,b){c._fire("get",a,b)}),this._pusher.on("beforestate",function(){c._fire("beforeget")}),this._pusher.on("afterstate",function(){c._fire("afterget")})},on:function(a,b){return"get"===a?this:void this._bind(a,b)},get:function(a,b){this._matcher.config([a]),b._routerRoutes?b._routerRoutes.push(a):b._routerRoutes=[a],1===b._routerRoutes.length&&this._bind("get",b)},getUID:function(){return this._uid=this._uid+1,this._uid},_preventDefault:function(a){return this._options.preventDefault?void(a.preventDefault?a.preventDefault():a.returnValue=!1):this},_matchElement:function(a,b){var c=a.matches?"matches":a.webkitMatchesSelector?"webkitMatchesSelector":a.mozMatchesSelector?"mozMatchesSelector":a.msMatchesSelector?"msMatchesSelector":a.oMatchesSelector?"oMatchesSelector":null;return c&&a[c].call(a,b)?a:a!==document.documentElement&&a.parentNode?this._matchElement(a.parentNode,b):null},_handler:function(a){var b=this,c=this._matchElement(a.target,"a");c&&-1===c.href.indexOf("#")&&this._matcher.test(c.href)&&(this._preventDefault(a),this._pusher.push(c.href,function(a){b._fire("get",c.href,a)}))},_bind:function(a,b){"function"==typeof b&&(this._callbacks[a]||(this._callbacks[a]=[]),b._routerID=this.getUID(),b._routerType=a,this._callbacks[a].push(b))},_fire:function(a,b,c){var d;if("get"===a)for(d=this._callbacks[a].length;d--;){var e=this._matcher.parse(b,this._callbacks[a][d]._routerRoutes);e.match&&this._callbacks[a][d].call(this,{route:this._matcher._cleanRoute(b),response:c,matches:e.matches})}else if(this._callbacks[a])for(d=this._callbacks[a].length;d--;)this._callbacks[a][d].call(this)}},a.Router=c}(window);