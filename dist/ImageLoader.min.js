!function(a){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var b=["webkit","moz","ms","o"],c=0;c<b.length&&!a.requestAnimationFrame;++c){var d=b[c];a.requestAnimationFrame=a[d+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d+"CancelAnimationFrame"]||a[d+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(a.navigator.userAgent)||!a.requestAnimationFrame||!a.cancelAnimationFrame){var e=0;a.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(e+16,b);return setTimeout(function(){a(e=c)},c-b)},a.cancelAnimationFrame=clearTimeout}}()}(window),function(a){"use strict";function b(b){return!b||b.jquery?b:("string"==typeof b?b=a(b):"addClass"in b||"removeClass"in b||"attr"in b||"not"in b||(b=a(b)),b)}function c(a){f+=a._num2Load,j.push(a),i||(i=!0,d())}function d(){if(g!==f)for(h=window.requestAnimationFrame(d),e=j.length;e--;)j[e]._numLoaded!==j[e]._num2Load&&j[e].handle();else window.cancelAnimationFrame(h),h=null,i=!1}var e,f=0,g=0,h=null,i=!1,j=[];if(!a)throw new Error("ImageLoader Class requires jQuery, ender, Zepto or something like that...");var k=function(){return this.init.apply(this,arguments)};k.IS_LOADING="-is-lazy-loading",k.IS_TRANSITION="-is-lazy-transition",k.IS_LOADED="-is-lazy-loaded",k.IS_HANDLED="-is-lazy-handled",k.prototype={constructor:k,init:function(a){if(!a)throw new Error("ImageLoader Class requires options to be passed");this._elements=b(a.elements),this._property=a.property||"data-src",this._numLoaded=0,this._num2Load=this._elements?this._elements.length:0,this._transitionDelay=a.transitionDelay||100,this._transitionDuration=a.transitionDuration||600,this._resolved=!1,this._handlers={handle:null,update:null,done:null},c(this)},on:function(a,b){return this._handlers[a]=b,this},fire:function(a,b){var c=!1;return"function"==typeof this._handlers[a]&&(c=this._handlers[a].call(this,b)),c},update:function(){var b=this;this._elements.each(function(){var c=a(this);b.fire("update",c)})},load:function(a,b){var c=this,d=null,e=null,f=a.is("img"),g=a.attr(this._property);return a.addClass(k.IS_LOADING),d=f?a[0]:new Image,e=setTimeout(function(){clearTimeout(e),a.addClass(k.IS_TRANSITION),d.onload=function(){f||(d=null,a.css("background-image","url("+g+")")),a.addClass(k.IS_LOADED),e=setTimeout(function(){clearTimeout(e),a.removeClass(k.IS_LOADING+" "+k.IS_TRANSITION+" "+k.IS_LOADED).addClass(k.IS_HANDLED),c._numLoaded!==c._num2Load||c._resolved?"function"==typeof b&&b(!1):(c._resolved=!0,c.fire("done"))},c._transitionDuration)},d.onerror=function(){c._numLoaded!==c._num2Load||c._resolved?"function"==typeof b&&b(!0):(c._resolved=!0,c.fire("done"))},d.src=g},this._transitionDelay),this},handle:function(){var b=this;this._elements.not("."+k.IS_HANDLED+", ."+k.IS_LOADING).each(function(){var c=a(this);b.fire("handle",c)&&(g++,b._numLoaded++,b.load(c))})}},window.ImageLoader=k}(window.jQuery||window.ender||window.Zepto);