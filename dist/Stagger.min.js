!function(a){"use strict";var b=function(){return this.init.apply(this,arguments)};b.prototype={constructor:b,init:function(a){this._step=null,this._when={},this._done=null,this._delay=a.delay||250,this._current=0,this._occurrences=a.steps||0,this._timeout=null,this._paused=!1,this._started=!1,this._resolved=!1},step:function(a){return"function"==typeof a&&(this._step=a),this},when:function(a,b){return"function"==typeof b&&(this._when[a]=b),this},done:function(a){return"function"==typeof a&&(this._done=a),this},pause:function(){return this._paused=!0,this},play:function(){return this._paused=!1,this},start:function(){return this.play()._stagger(),this},_resolve:function(){return this._resolved=!0,this._timeout=null,this},_stagger:function(){if(this._started)return this;this._started=!0;var a=this,b=function(){a._timeout=setTimeout(function(){return clearTimeout(a._timeout),a._resolved?void(a._timeout=null):a._paused?void b():("function"==typeof a._step&&a._step(a._current),"function"==typeof a._when[a._current]&&a._when[a._current](a._current),a._current++,void(a._current===a._occurrences?(a._resolve(),"function"==typeof a._done&&a._done()):b()))},a._delay)};b()}},a.Stagger=b}(window);