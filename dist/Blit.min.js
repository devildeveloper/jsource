!function(a){"use strict";var b=a.requestAnimationFrame,c=a.cancelAnimationFrame,d=function(){return this.init.apply(this,arguments)};d.prototype={_blit:null,_fps:60,_interval:1e3/60,_now:null,_then:null,_delta:null,_first:null,_time:null,_frame:0,_cycle:null,_paused:!1,_started:!1,init:function(a){this._fps=a.fps||this._fps,this._interval=1e3/this._fps,this._blit=a.blit||this._blit,this._paused=a.paused||this._paused,this._started||this._paused||this.start()},blit:function(a){return"function"==typeof a&&(this._blit=a),this},pause:function(){return this._paused=!0,this},play:function(){return this._paused=!1,this},start:function(){return this._started?this:(this._paused=!1,this._blitInit(),this)},stop:function(){return c(this._cycle),this._started=!1,this._cycle=null,this},_blitInit:function(){if(this._started)return this;this._started=!0,this._then=(new Date).getTime(),this._first=this._then;var a=this,c=function(){a._cycle=b(c),a._now=(new Date).getTime(),a._delta=a._now-a._then,a._delta>a._interval&&(a._paused||(a._frame++,a._then=a._now-a._delta%a._interval,a._time=a._then-a._first,"function"==typeof a._blit&&a._blit(a._frame)))};c()}},a.Blit=d}(window);