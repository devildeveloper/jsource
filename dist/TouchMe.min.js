!function(a,b){"use strict";var c=null,d=function(){return c||this.init.apply(this,arguments)};d.prototype={constructor:d,init:function(a){var d=this;c=this,this._events={},this._touches={},this._gestures=[],this._handlers={},this._lastSwipe="",this._lastTouch=0,this._threshold=60,this._tapstart=null,this._windowScrollY=0,this._isTouchDown=!1,this._options={preventDefault:!0,preventMouseEvents:!1},this._uid=0;for(var e in this._options)a&&typeof a[e]!==b&&(this._options[e]=a[e]);document.addEventListener("touchstart",function(a){d._onTouchStart(this,a)},!1),document.addEventListener("touchmove",function(a){d._onTouchMove(this,a)},!1),document.addEventListener("touchend",function(a){d._onTouchEnd(this,a)},!1),this._options.preventMouseEvents||(document.addEventListener("mousedown",function(a){d._onTouchStart(this,a)},!1),document.addEventListener("mousemove",function(a){d._onTouchMove(this,a)},!1),document.addEventListener("mouseup",function(a){d._onTouchEnd(this,a)},!1))},on:function(a,b,c){"function"==typeof c&&(this._handlers[a]||(this._handlers[a]=[]),c._touchmeID=this.getUID(),c._touchmeSelector=b,c._touchmeEvent=a,this._handlers[a].push(c))},off:function(a,b){if(!this._handlers[a])return this;for(var c=0,d=this._handlers[a].length;d>c;c++)if(b._touchmeID===this._handlers[a][c]._touchmeID){this._handlers[a].splice(c,1);break}},getUID:function(){return this._uid=this._uid+1,this._uid},getSwipe:function(a,b,c,d){var e,f=Math.abs(a-b),g=Math.abs(c-d);return e=f>=g?a-b>0?"left":"right":c-d>0?"up":"down"},getSwipeAngle:function(a,b,c,d){var e,f=c-d,g=a-b;return e=Math.atan2(f,g),e*=180/Math.PI},isDelegate:function(a,b){return this._matchElement(a.target,b)},is45ish:function(a){return a=Math.abs(a),180>a&&a>135||a>0&&45>a},_call:function(a,b,c){if(!this._handlers[a])return this;for(var d=this._handlers[a].length;d--;){var e=this.isDelegate(c,this._handlers[a][d]._touchmeSelector);e&&this._handlers[a][d].call(e,c)}},_isDelegated:function(a){var b=null;for(var c in this._handlers)for(var d=this._handlers[c].length;d--&&!(b=this.isDelegate(a,this._handlers[c][d]._touchmeSelector)););return b},_matchElement:function(a,b){var c=a.matches?"matches":a.webkitMatchesSelector?"webkitMatchesSelector":a.mozMatchesSelector?"mozMatchesSelector":a.msMatchesSelector?"msMatchesSelector":a.oMatchesSelector?"oMatchesSelector":null;return c&&a[c].call(a,b)?a:a!==document.documentElement&&a.parentNode?this._matchElement(a.parentNode,b):null},_onTouchStart:function(b,c){this._isTouchDown=!0,this._gestures=[],this._lastSwipe="",this._tapstart=Date.now(),this._windowScrollY=a.scrollY,this._events={},this._events.touchstart=c,c.touches?(this._lastTouch=c.touches.length-1,this._touches.x0=c.touches[this._lastTouch].pageX,this._touches.y0=c.touches[this._lastTouch].pageY,this._touches.x1=c.touches[this._lastTouch].pageX,this._touches.y1=c.touches[this._lastTouch].pageY):(this._lastTouch=0,this._touches.x0=c.pageX,this._touches.y0=c.pageY,this._touches.x1=c.pageX,this._touches.y1=c.pageY)},_onTouchMove:function(a,b){if(this._isTouchDown){var c,d,e,f;if(this._events.touchmove=b,b.touches?(this._touches.x2=b.touches[this._lastTouch].pageX,this._touches.y2=b.touches[this._lastTouch].pageY):(this._touches.x2=b.pageX,this._touches.y2=b.pageY),e=Math.abs(this._touches.x1-this._touches.x2),f=Math.abs(this._touches.y1-this._touches.y2),c=this.getSwipeAngle(this._touches.x0,this._touches.x2,this._touches.y0,this._touches.y2),this._isDelegated(b)&&this.is45ish(c)&&this._options.preventDefault&&b.preventDefault(),e>this._threshold||f>this._threshold){if(d=this.getSwipe(this._touches.x1,this._touches.x2,this._touches.y1,this._touches.y2),this._touches.x1=this._touches.x2,this._touches.y1=this._touches.y2,d===this._lastSwipe)return;this._lastSwipe=d,this._gestures.push(d)}this._call("swipemove",a,b)}},_onTouchEnd:function(b,c){this._isTouchDown=!1,this._events.touchend=c;var d,e=(this.getSwipeAngle(this._touches.x0,this._touches.x2,this._touches.y0,this._touches.y2),Math.abs(a.scrollY-this._windowScrollY));if(c.originalEvent=this._events.touchstart,!this._gestures.length&&e<this._threshold)d=Date.now(),d-this._tapstart>=this._threshold&&(c.gestures=["tap"],this._call("swipetap",b,c)),this._tapstart=null;else for(var f=0,g=this._gestures.length;g>f;f++)c.gestures=this._gestures,this._call("swipe"+this._gestures[f],b,c)}},a.TouchMe=d}(window);