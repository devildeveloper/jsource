!function(a){"use strict";var b=function(){return this.init.apply(this,arguments)};b.prototype={constructor:b,_touches:{},_gestures:[],_handlers:{},_lastSwipe:"",_lastTouch:0,_threshold:60,_tapstart:null,_windowScrollY:0,_isTouchDown:!1,init:function(){var a=this;document.addEventListener("touchstart",function(b){a._onTouchStart(b)},!1),document.addEventListener("mousedown",function(b){a._onTouchStart(b)},!1),document.addEventListener("touchmove",function(b){a._onTouchMove(b)},!1),document.addEventListener("mousemove",function(b){a._onTouchMove(b)},!1),document.addEventListener("touchend",function(b){a._onTouchEnd(b)},!1),document.addEventListener("mouseup",function(b){a._onTouchEnd(b)},!1)},on:function(a,b){"function"==typeof b&&(this._handlers[a]||(this._handlers[a]=[]),b._timestamp=Date.now(),this._handlers[a].push(b))},off:function(a,b){if(!this._handlers[a])return this;for(var c=this._handlers[a].length;c--;)if(b._timestamp===this._handlers[a][c]._timestamp){this._handlers[a].splice(c,1);break}},getSwipe:function(a,b,c,d){var e,f=Math.abs(a-b),g=Math.abs(c-d);return e=f>=g?a-b>0?"left":"right":c-d>0?"up":"down"},_call:function(a,b){if(!this._handlers[a])return this;for(var c=this._handlers[a].length;c--;)this._handlers[a][c].call(document,b)},_onTouchStart:function(b){this._isTouchDown=!0,this._gestures=[],this._lastSwipe="",this._tapstart=Date.now(),this._windowScrollY=a.scrollY,b.touches?(this._lastTouch=b.touches.length-1,this._touches.x1=b.touches[this._lastTouch].pageX,this._touches.y1=b.touches[this._lastTouch].pageY):(this._lastTouch=0,this._touches.x1=b.pageX,this._touches.y1=b.pageY)},_onTouchMove:function(a){if(this._isTouchDown){var b,c,d;if(a.touches?(this._touches.x2=a.touches[this._lastTouch].pageX,this._touches.y2=a.touches[this._lastTouch].pageY):(this._touches.x2=a.pageX,this._touches.y2=a.pageY),c=Math.abs(this._touches.x1-this._touches.x2),d=Math.abs(this._touches.y1-this._touches.y2),c>this._threshold||d>this._threshold){if(b=this.getSwipe(this._touches.x1,this._touches.x2,this._touches.y1,this._touches.y2),this._touches.x1=this._touches.x2,this._touches.y1=this._touches.y2,("left"===b||"right"===b)&&a.preventDefault(),b===this._lastSwipe)return;this._lastSwipe=b,this._gestures.push(b)}}},_onTouchEnd:function(b){this._isTouchDown=!1;var c,d=Math.abs(a.scrollY-this._windowScrollY);if(!this._gestures.length&&d<this._threshold)c=Date.now(),c-this._tapstart>=this._threshold&&(b.gestures=["tap"],this._call("swipetap",b)),this._tapstart=null;else for(var e=0,f=this._gestures.length;f>e;e++)b.gestures=this._gestures,this._call("swipe"+this._gestures[e],b)}},a.TouchMe=b}(window);